{"ast":null,"code":"var _jsxFileName = \"/Users/aizhanyl/Downloads/myshopSkin/src/contexts/AuthContext.js\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport React, { useReducer } from 'react';\nimport { AUTH_API } from '../helpers/constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const authContext = /*#__PURE__*/React.createContext();\nconst INIT_STATE = {};\n\nconst reducer = (state = INIT_STATE, action) => {\n  switch (action.type) {\n    default:\n      return state;\n  }\n};\n\nconst AuthContext = ({\n  children\n}) => {\n  _s();\n\n  const [state, dispatch] = useReducer(reducer, INIT_STATE);\n\n  async function registerUser(e, history) {\n    e.preventDefault();\n    const newUser = {\n      email: e.target[4].value,\n      password: e.target[6].value\n    };\n\n    try {\n      const res = await axios.post(`${AUTH_API}/registration`, newUser);\n      console.log(res);\n\n      if (res.data && res.data.token) {\n        storeToken(res.data.token);\n      }\n\n      alert(res.status);\n      history.push('/login');\n    } catch (e) {\n      console.log(e.response);\n      alert(e.response.statusText);\n    }\n  }\n\n  async function loginUser(e, history) {\n    e.preventDefault();\n    const loginUser = {\n      email: e.target[0].value,\n      password: e.target[2].value\n    };\n\n    try {\n      const res = await axios.post(`${AUTH_API}/login`, loginUser);\n      console.log(res);\n      alert(res.status);\n      history.push('/');\n    } catch (e) {\n      console.log(e.response);\n      alert(e.response.statusText);\n    }\n  }\n\n  const storeToken = token => {\n    localStorage.setItem('jwt_token', token);\n  };\n\n  return /*#__PURE__*/_jsxDEV(authContext.Provider, {\n    value: {\n      registerUser,\n      loginUser\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AuthContext, \"4m7vccIZ8Keq6ndhHxt+SMfGKKc=\");\n\n_c = AuthContext;\nexport default AuthContext;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthContext\");","map":{"version":3,"sources":["/Users/aizhanyl/Downloads/myshopSkin/src/contexts/AuthContext.js"],"names":["axios","React","useReducer","AUTH_API","authContext","createContext","INIT_STATE","reducer","state","action","type","AuthContext","children","dispatch","registerUser","e","history","preventDefault","newUser","email","target","value","password","res","post","console","log","data","token","storeToken","alert","status","push","response","statusText","loginUser","localStorage","setItem"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport React, { useReducer } from 'react';\r\nimport { AUTH_API } from '../helpers/constants';\r\n\r\nexport const authContext = React.createContext()\r\n\r\nconst INIT_STATE = {}\r\n\r\nconst reducer = (state = INIT_STATE, action) => {\r\n    switch (action.type) {\r\n        default: return state\r\n    }\r\n}\r\n\r\nconst AuthContext = ({ children }) => {\r\n    const [state, dispatch] = useReducer(reducer, INIT_STATE)\r\n\r\n    async function registerUser(e, history) {\r\n        e.preventDefault();\r\n        const newUser = {\r\n            email: e.target[4].value,\r\n            password: e.target[6].value\r\n        }\r\n        try {\r\n            const res = await axios.post(`${AUTH_API}/registration`, newUser)\r\n            console.log(res)\r\n            if (res.data && res.data.token) {\r\n                storeToken(res.data.token)\r\n            }\r\n            alert(res.status)\r\n            history.push('/login')\r\n        } catch (e) {\r\n            console.log(e.response)\r\n            alert(e.response.statusText)\r\n        }\r\n    }\r\n\r\n    async function loginUser(e, history) {\r\n        e.preventDefault();\r\n        const loginUser = {\r\n            email: e.target[0].value,\r\n            password: e.target[2].value\r\n        }\r\n        try {\r\n            const res = await axios.post(`${AUTH_API}/login`, loginUser)\r\n            console.log(res)\r\n            alert(res.status)\r\n            history.push('/')\r\n        } catch (e) {\r\n            console.log(e.response)\r\n            alert(e.response.statusText)\r\n        }\r\n    }\r\n\r\n    const storeToken = (token) => {\r\n        localStorage.setItem('jwt_token', token)\r\n    }\r\n\r\n    return (\r\n        <authContext.Provider value={{\r\n            registerUser,\r\n            loginUser,\r\n        }}>\r\n            {children}\r\n        </authContext.Provider>\r\n    );\r\n};\r\n\r\nexport default AuthContext;"]},"metadata":{},"sourceType":"module"}